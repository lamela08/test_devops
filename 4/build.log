Running with gitlab-runner 17.11.1 (96856197)
  on  02SThT2fD, system ID: r_D9pbO30LhOas
Preparing the "docker" executor 00:03
Using Docker executor with image docker:24.0.5 ...
Pulling docker image docker:24.0.5 ...
Using docker image sha256:7015f2c475d511a251955877c2862016a4042512ba625ed905e69202f87e1a21 for docker:24.0.5 with digest docker@sha256:3c6e4dca7a63c9a32a4e00da40461ce067f255987ccc9721cf18ffa087bcd1ef ...
Preparing environment 00:01
Running on runner-02stht2fd-project-1-concurrent-0 via runner2.local.com...
Getting source from Git repository 00:00
Fetching changes with git depth set to 20...
Reinitialized existing Git repository in /builds/mygroup/docker-cicd/.git/
Created fresh repository.
Checking out 93510f41 as detached HEAD (ref is main)...
Skipping Git submodules setup
Executing "step_script" stage of the job script 00:15
Using docker image sha256:7015f2c475d511a251955877c2862016a4042512ba625ed905e69202f87e1a21 for docker:24.0.5 with digest docker@sha256:3c6e4dca7a63c9a32a4e00da40461ce067f255987ccc9721cf18ffa087bcd1ef ...
$ docker login -u $DOCKER_HUB_USER -p $DOCKER_HUB_TOKEN
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
Login Succeeded
$ docker build -t $DOCKER_HUB_USER/${PROJECT}:$VERSION .
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 994B done
#1 DONE 0.0s
#2 resolve image config for docker-image://docker.io/docker/dockerfile:1
#2 ...
#3 [auth] docker/dockerfile:pull token for registry-1.docker.io
#3 DONE 0.0s
#2 resolve image config for docker-image://docker.io/docker/dockerfile:1
#2 DONE 1.7s
#4 docker-image://docker.io/docker/dockerfile:1@sha256:9857836c9ee4268391bb5b09f9f157f3c91bb15821bb77969642813b0d00518d
#4 CACHED
#5 [internal] load metadata for docker.io/library/nginx:latest
#5 DONE 0.0s
#6 [internal] load .dockerignore
#6 transferring context: 2B done
#6 DONE 0.0s
#7 [stage-0 1/2] FROM docker.io/library/nginx:latest
#7 DONE 0.0s
#8 [internal] load build context
#8 transferring context: 5.20kB done
#8 DONE 0.0s
#9 [stage-0 2/2] RUN --mount=type=bind,source=ssl,dst=/tmp/ssl_mount <<-EOF (#Create necessary files...)
#9 CACHED
#10 exporting to image
#10 exporting layers done
#10 writing image sha256:d352f52219f37b7488dc0ad994d36664b3f7766d3ea10ae53cc2c26a431787e8 done
#10 naming to docker.io/[MASKED]/docker-cicd:0.0.2 done
#10 DONE 0.0s
WARNING: buildx: git was not found in the system. Current commit information was not captured by the build
$ docker push $DOCKER_HUB_USER/${PROJECT}:$VERSION
The push refers to repository [docker.io/[MASKED]/docker-cicd]
565f8dbc2f3a: Preparing
8030dd26ec5d: Preparing
d84233433437: Preparing
f8455d4eb3ff: Preparing
286733b13b0f: Preparing
46a24b5c31d8: Preparing
84accda66bf0: Preparing
6c4c763d22d0: Preparing
46a24b5c31d8: Waiting
84accda66bf0: Waiting
6c4c763d22d0: Waiting
d84233433437: Layer already exists
286733b13b0f: Layer already exists
f8455d4eb3ff: Layer already exists
8030dd26ec5d: Layer already exists
84accda66bf0: Layer already exists
6c4c763d22d0: Layer already exists
46a24b5c31d8: Layer already exists
565f8dbc2f3a: Layer already exists
0.0.2: digest: sha256:d316e80671d1d86dd047044074f2e2d58076eb1675ce930ab16d56aa25e0ca97 size: 1987
Cleaning up project directory and file based variables 00:01
Job succeeded
